<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings â€“ BeyondMatch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <h2 class="brand">BeyondMatch</h2>
        <nav class="menu">
            <a href="index.html" class="menu-item">ğŸ“Š Dashboard</a>
            <a href="upload-jd.html" class="menu-item">ğŸ“„ Upload JD</a>
            <a href="upload-candidate.html" class="menu-item">ğŸ‘¤ Upload Candidate</a>
            <a href="matches.html" class="menu-item">ğŸ” Matches</a>
            <a href="reports.html" class="menu-item">ğŸ“ˆ Reports</a>
            <a href="settings.html" class="menu-item active">âš™ Settings</a>
        </nav>
    </aside>

    <!-- MAIN -->
    <main class="main">
        <header class="topbar">
            <input class="search" placeholder="Search settings...">
            <div class="user-box" id="userInitial">U</div>
        </header>

        <h1>Settings & Preferences</h1>

        <div class="card large">
            <h3>Theme</h3>
            <button class="btn">Dark Mode (default)</button>

            <h3 style="margin-top:25px;">Account</h3>
            <p id="userEmail" style="opacity:0.75; margin:10px 0 20px 0;"></p>

            <button class="btn">Change Password</button>
            <button class="btn" id="logoutBtn">Logout</button>
        </div>
    </main>

    <!-- FIREBASE AUTH LOGIC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import {
            getAuth,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // ğŸ”¹ SAME Firebase config you used elsewhere
        const firebaseConfig = {
            apiKey: "AIzaSyCbrwCaaQYEFCF1FJto_O3OYi68qTOqGQc",
            authDomain: "beyondmatch-a714f.firebaseapp.com",
            projectId: "beyondmatch-a714f",
            storageBucket: "beyondmatch-a714f.firebasestorage.app",
            messagingSenderId: "16758090560",
            appId: "1:16758090560:web:89f207139970c97592a8a5"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        /* ğŸ” Protect page + load user data */
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                // Not logged in â†’ redirect
                window.location.href = "landing.html";
                return;
            }

            // Logged-in user
            document.getElementById("userInitial").innerText =
                user.email.charAt(0).toUpperCase();

            document.getElementById("userEmail").innerText =
                "Logged in as: " + user.email;
        });

        /* ğŸšª Logout */
        document.getElementById("logoutBtn").addEventListener("click", async () => {
            await signOut(auth);
            window.location.href = "landing.html";
        });
    </script>

</body>
</html>
